import{createMemoryHistory as e,parsePath as t}from"history";import n from"react";function r(e,t){if(!e)throw Error(t)}let l=n.createContext(),u=n.createContext({outlet:null,params:{},pathname:"",route:null}),a=e=>e(),i=n.useTransition||(()=>[a,!1]);function o({children:e=null,history:t,timeout:u=2e3}){let[a,o]=n.useState(t.location),[c,s]=i({timeoutMs:u});return u=n.useRef(!1),n.useContext(l)&&r(!1),u.current||(u.current=!0,t.listen(({location:e})=>{c(()=>{o(e)})})),n.createElement(l.Provider,{children:e,value:{history:t,location:a,pending:s}})}function c(e){let t=[];return n.Children.forEach(e,e=>{if(n.isValidElement(e)){var{children:r,from:l,path:u,to:a}=e.props;if(e.type===n.Fragment)t.push.apply(t,c(r));else{if(u=u||l||"/",a)e={path:u,redirectTo:a};else{e={path:u,element:e};let t=c(r);t.length&&(e.children=t)}t.push(e)}}}),t}function s(){return n.useContext(l).location}function p(){let{history:e,pending:t}=n.useContext(l),{pathname:a}=n.useContext(u);return null==e&&r(!1),n.useCallback((n,{replace:r,state:l}={})=>{"number"==typeof n?e.go(n):(n=E(n,a),e[r||t?"replace":"push"](n,l))},[e,t,a])}function h(){return n.useContext(u).outlet}function f(e){let{pathname:t}=n.useContext(u);return n.useMemo(()=>E(e,t),[e,t])}function m(e,t="",r=!1){let{params:l,pathname:a}=n.useContext(u);t=t?[a,t].join("/").replace(/\/\/+/g,"/"):a;let i=p(),o=s();var c=n.useMemo(()=>g(e,o,t,r),[e,o,t,r]);if(!c)return null;var h=c.find(e=>null!=e.route.redirectTo);if(h){let{params:e,route:t}=h;return c=E(t.redirectTo,a),({pathname:h}=c),/:\w+/.test(h)&&(c={...c,pathname:R(h,e)}),i(c,{replace:!0}),null}return c.reduceRight((e,{params:r,pathname:a,route:i})=>n.createElement(u.Provider,{children:i.element,value:{outlet:e,params:{...l,...r},pathname:[t,a].join("/").replace(/\/\/+/g,"/"),route:i}}),null)}function g(e,n,r="",l=!1){"string"==typeof n&&(n=t(n)),r=r.replace(/^\/+|\/+$/g,"");let u=n.pathname.slice(1);if(r)if(r===u)u="";else{if(!u.startsWith(r))return null;u=u.slice(r.length).replace(/^\/+/,"")}for(function(e){let t=e.reduce((e,[t])=>(e[t]=function(e){let t=(e=e.split("/")).length;return e.some(x)&&(t+=-2),e.filter(e=>"*"!==e).reduce((e,t)=>e+(d.test(t)?2:""===t?1:10),t)}(t),e),{});e.sort((e,n)=>{let[r,,l]=e;e=t[r];let[u,,a]=n;return e!==(n=t[u])?n-e:function(e,t){return e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n])?e[e.length-1]-t[t.length-1]:0}(l,a)})}(e=function e(t,n=[],r="",l=[],u=[]){return t.forEach((t,a)=>{let i=[r,t.path].join("/").replace(/\/\/+/g,"/"),o=l.concat(t);a=u.concat(a),n.push([i,o,a]),t.children&&e(t.children,n,i,o,a)}),n}(e)),n=0;n<e.length;++n){let[t,a]=e[n];if([r]=y(t,!0,l),r.test(u))return a.map((e,t)=>{t=a.slice(0,t+1).map(e=>e.path).join("/").replace(/\/\/+/g,"/");let[n,r]=y(t,!1,l);return{params:C(r,(t=u.match(n)).slice(2)),pathname:"/"+t[1],route:e}})}return null}let d=/^:\w+$/,x=e=>"*"===e;function y(e,t,n){let r=[],l="^("+e.replace(/^\/+/,"").replace(/\*\//g,"").replace(/\/?\*?$/,"").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(e,t)=>(r.push(t),"([^\\/]+)"))+")";return e.endsWith("*")?(e.endsWith("/*")&&(l+="\\/?"),r.push("*"),l+="(.*)"):t&&(l+="\\/?"),t&&(l+="$"),[new RegExp(l,n?void 0:"i"),r]}function C(e,t){return e.reduce((e,n,r)=>(e[n]=t[r],e),{})}function v(e,t){let n=t.replace(/\/+$/,"").replace(/\/\/+/g,"/").split("/");return e.replace(/\/\/+/g,"/").split("/").forEach(e=>{".."===e?1<n.length&&n.pop():"."!==e&&n.push(e)}),1<n.length?n.join("/").replace(/\/\/+/g,"/"):"/"}function E(e,n="/"){let{pathname:r,search:l="",hash:u=""}="string"==typeof e?t(e):e;return{pathname:r?r.startsWith("/")?v(r,"/"):v(r,n):n,search:l,hash:u}}function R(e,t={}){return e.replace(/:(\w+)/g,(e,n)=>t[n]||`:${n}`).replace(/\*$/,e=>t[e]||e)}function $({children:t,initialEntries:r,initialIndex:l,timeout:u}){let a=n.useRef(null);return null==a.current&&(a.current=e({initialEntries:r,initialIndex:l})),n.createElement(o,{children:t,history:a.current,timeout:u})}function w({to:e,replace:t=!1,state:n}){return p()(e,{replace:t,state:n}),null}function j(){return h()}function b(){return null}function T({element:e}){return e}function W({basename:e="",caseSensitive:t=!1,children:n}){return m(n=c(n),e,t)}function L(e,t=!0){let{history:u}=n.useContext(l);null==u&&r(!1),n.useEffect(()=>{if(t){let t=u.block(n=>{e({...n,retry(){t(),n.retry()}})});return t}},[u,t,e])}function M(e){e=f(e);let{history:t}=n.useContext(l);return null==t&&r(!1),t.createHref(e)}function P(e){let t=s();return e=f(e),t.pathname===e.pathname}function k(){return n.useContext(u).params}export{$ as MemoryRouter,w as Navigate,j as Outlet,b as Redirect,T as Route,o as Router,W as Routes,c as createRoutesFromChildren,R as generatePath,g as matchRoutes,E as resolveLocation,L as useBlocker,M as useHref,s as useLocation,P as useMatch,p as useNavigate,h as useOutlet,k as useParams,f as useResolvedLocation,m as useRoutes};
//# sourceMappingURL=react-router.production.min.js.map
